{% load static %}
<div class="l-inner">
    <div class="l-tabs">
        <div class="c-tabs js-tabs-container">
            <div class="c-tabs__nav">
                <button class="c-tabs__placeholder c-underline-link js-tabs-open-trigger">
                    {% with self.events|dictsortreversed:"date"|first as first_event %}
                    <span class="js-tabs-placeholder">
                        {{ first_event.date|date:'Y' }}
                    </span>
                    {% endwith %}
                    <span class="c-tabs__placeholder-icon o-icon-wrapper">
                        <svg class="o-icon o-icon--arrow-right-bold">
                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{% static 'svg/symbol/svg/sprite.symbol.svg#icon-arrow-right-bold' %}"></use>
                        </svg>
                    </span>
                </button>
                <ul class="c-tabs__nav-list js-tabs-nav">
                    {% for event in self.events|dictsortreversed:"date" %}
                        {% ifchanged %}
                            <li class="c-tabs__nav-item" data-tab="{{ event.date|date:'Y' }}">
                                <button class="c-tabs__cta c-underline-link">
                                    {{ event.date|date:'Y' }}
                                </button>
                            </li>
                        {% endifchanged %}
                    {% endfor %}
                </ul>
            </div>
            <div class="c-tabs__content js-tabs-content">
                <div class="c-tabs__heading">
                    <div class="c-event-heading">
                        <p class="c-event-heading__text">
                            Date
                            <span class="c-event-heading__separator">/</span>
                        </p>
                        <p class="c-event-heading__text">
                            Event
                        </p>
                    </div>
                </div>
                <ul class="c-tabs__content-list">
                    {% for event in self.events|dictsortreversed:"date" %}
                    <li class="c-tabs__content-item" data-tab="{{ event.date|date:'Y' }}">
                        <div class="c-event-box">
                            <div class="c-event-box__head">
                                <time datetime="{{ event.date|date:'d/m/Y' }}" class="c-event-box__date">
                                    {{ event.date|date:"j F Y" }}
                                </time>
                                <h5 class="c-event-box__title">
                                    {{event.name}}
                                </h5>
                            </div>
                            <div class="c-event-box__btn-wrapper">
                                <a href="#" target="_blank" class="c-icon-btn">
                                    <span class="c-icon-btn__icon o-icon-wrapper">
                                        <svg class="o-icon o-icon--calendar">
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{% static 'svg/symbol/svg/sprite.symbol.svg#icon-calendar' %}"></use>
                                        </svg>
                                    </span>
                                    Add to calendar
                                </a>
                            </div>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
                <p class="c-tabs__legend">
                    * to be confirmed
                </p>
            </div>
        </div>
    </div>
</div>
